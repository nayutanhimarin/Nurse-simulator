<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICUリーダー采配シミュレーター</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">

        <!-- ▼▼▼ 左側のメインパネル ▼▼▼ -->
        <div class="main-panel">
            
            <div class="header-container">
                <h1>&#x1F469;&#x200D;&#x2695;&#xFE0F; ICUリーダー采配シミュレーター</h1>
            </div>

            <div class="ward-display-area">
                <div class="ward-row" id="south-ward-row">
                    <button id="btn-south" class="ward-tab tab-button">南病棟</button>
                    <div class="bed-display-container" id="south-beds-display"></div>
                </div>
                <div class="ward-row" id="north-ward-row" class="active">
                    <button id="btn-north" class="ward-tab tab-button active">北病棟</button>
                    <div class="bed-display-container" id="north-beds-display"></div>
                </div>
            </div>

            <div class="controls-container">
                <div class="control-group">
                    <div class="mode-tabs">
                        <button id="btn-nurse-board" class="tab-button active">看護師ボード</button>
                        <button id="btn-bed-board" class="tab-button">ベッドボード</button>
                    </div>
                    <div class="nurse-count-settings">
                        <div>
                            <label for="count-south">南病棟:</label>
                            <input type="number" id="count-south" value="7" min="1">
                        </div>
                        <div>
                            <label for="count-north">北病棟:</label>
                            <input type="number" id="count-north" value="6" min="1">
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <div class="mode-tabs">
                        <button id="btn-am" class="tab-button active">午前</button>
                        <button id="btn-pm" class="tab-button">午後</button>
                    </div>
                    <div id="trash-can" class="trash-can-area">
                        &#x1F5D1;
                    </div>
                </div>
            </div>

            <div class="schedule-board-container">
                <div class="left-column-group">
                    <div class="names-area">
                        <div class="names-header-spacer"></div>
                    </div>
                    <div class="patient-summary-area">
                        <div class="patient-summary-header">患者概要</div>
                    </div>
                </div>
                <div class="timeline-area">
                    <div class="timeline-container">
                        <div class="timeline-header">
                            <div class="time-row hour-row"></div>
                            <div class="time-row minute-row"></div>
                        </div>
                        <div class="timeline-body"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ▲▲▲ ここまでメインパネル ▲▲▲ -->


        <!-- ▼▼▼ 右側のサイドパネル ▼▼▼ -->
        <div class="side-panel">
            <div class="heatmap-controls-container">
                <h4>&#x1F525; 業務量ヒートマップ</h4>
                <div class="time-selector">
                    <label for="heatmap-time">表示時刻:</label>
                    <input type="time" id="heatmap-time" name="heatmap-time" value="08:00" step="300">
                </div>
                <div class="heatmap-legend">
                    <div class="legend-item" style="background-color: #e6f5e6;">応援可</div>
                    <div class="legend-item" style="background-color: #ffffcc;"></div>
                    <div class="legend-item" style="background-color: #ffe6b3;">標準</div>
                    <div class="legend-item" style="background-color: #ffcc99;"></div>
                    <div class="legend-item" style="background-color: #ffb380;">要応援</div>
                </div>
            </div>

            <div class="care-list-container">
                <h3>ケアリスト</h3>
                <div class="care-list-tabs"></div>
                <div class="care-list-body"></div>
            </div>
        </div>
        <!-- ▲▲▲ ここまでサイドパネル ▲▲▲ -->

    </div>

    <!-- ▼▼▼ モーダルウィンドウのHTMLを追加 ▼▼▼ -->
    <div id="modal-overlay" class="modal-hidden">
        <div id="task-modal">
            <h2>タスク詳細設定</h2>
            <form id="task-form">
                <div class="form-group">
                    <label>タスク名:</label>
                    <p id="modal-task-name" class="modal-task-name-display"></p>
                </div>
                <div class="form-group">
                    <label for="modal-start-time">開始時刻:</label>
                    <input type="time" id="modal-start-time" step="300" required>
                </div>
                <div class="form-group">
                    <label>担当看護師:</label>
                    <div id="modal-nurse-list" class="modal-checkbox-list"></div>
                </div>
                <div class="form-group">
                    <label for="modal-bed-select">担当ベッド:</label>
                    <select id="modal-bed-select" required></select>
                </div>
                <div class="modal-actions">
                    <button type="button" id="modal-delete-btn" class="danger-btn">削除</button>
                    <button type="submit" id="modal-confirm-btn">決定</button>
                    <button type="button" id="modal-cancel-btn">キャンセル</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ▼▼▼ 患者情報モーダル ▼▼▼ -->
    <div id="patient-modal-overlay" class="modal-hidden">
        <div id="patient-modal">
            <h2 id="patient-modal-title">ベッド情報編集</h2>
            <form id="patient-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="patient-dept">科</label>
                        <select id="patient-dept">
                            <option>呼外</option>
                            <option>心外</option>
                            <option>脳外</option>
                            <option>肝外</option>
                            <option>消外</option>
                            <option>泌尿器</option>
                            <option>産婦</option>
                            <option>脊外</option>
                            <option>救急</option>
                            <option>循内</option>
                            <option>消内</option>
                            <option>他内科</option>
                            <option>皮膚科/形成外科</option>
                            <option>小児/小児外科</option>
                            <option>小児心外</option>
                            <option>その他</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="patient-severity">重症度</label>
                        <select id="patient-severity">
                            <option value="1">1 (軽症)</option>
                            <option value="2">2</option>
                            <option value="3">3 (標準)</option>
                            <option value="4">4</option>
                            <option value="5">5 (重症)</option>
                        </select>
                    </div>
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="patient-is-empty">
                        <label for="patient-is-empty">空床</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="patient-summary-select">患者概要</label>
                    <select id="patient-summary-select"></select>
                    <input type="text" id="patient-summary-text" placeholder="概要を自由記述">
                </div>
                <div class="form-row device-checks">
                    <div class="form-group checkbox-group"><input type="checkbox" id="patient-vent"><label for="patient-vent">人工呼吸</label></div>
                    <div class="form-group checkbox-group"><input type="checkbox" id="patient-purification"><label for="patient-purification">血液浄化</label></div>
                    <div class="form-group checkbox-group"><input type="checkbox" id="patient-assist"><label for="patient-assist">補助循環</label></div>
                    <div class="form-group checkbox-group"><input type="checkbox" id="patient-delirium"><label for="patient-delirium">せん妄</label></div>
                </div>
                <div class="form-group">
                    <label for="patient-mobility">離床具合</label>
                    <select id="patient-mobility"><option>床上</option><option>端坐位</option><option>立位</option><option>歩行</option></select>
                </div>
                <div class="form-row plan-group">
                    <div class="form-group checkbox-group"><input type="checkbox" id="patient-discharge-plan"><label for="patient-discharge-plan">転棟予定</label><input type="time" id="patient-discharge-time" class="plan-time-hidden"></div>
                    <div class="form-group checkbox-group"><input type="checkbox" id="patient-admission-plan"><label for="patient-admission-plan">入室予定</label><input type="time" id="patient-admission-time" class="plan-time-hidden"></div>
                </div>
                <div class="modal-actions"><button type="submit">決定</button><button type="button" id="patient-modal-cancel">キャンセル</button></div>
            </form>
        </div>
    </div>

    <!-- ▼▼▼ 看護師設定モーダル ▼▼▼ -->
    <div id="nurse-modal-overlay" class="modal-hidden">
        <div id="nurse-modal">
            <h2 id="nurse-modal-title">看護師設定</h2>
            <form id="nurse-form">
                <div class="form-group">
                    <label for="nurse-level">看護師レベル</label>
                    <select id="nurse-level">
                        <option>新人</option>
                        <option>フリージア</option>
                        <option>非リーダー</option>
                        <option>リーダー</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>基本担当ベッド (最大3つ)</label>
                    <div id="nurse-bed-list" class="modal-checkbox-list"></div>
                </div>
                <div class="modal-actions"><button type="submit">決定</button><button type="button" id="nurse-modal-cancel">キャンセル</button></div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>