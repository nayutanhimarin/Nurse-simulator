/* 基本設定 */
body {
    font-family: sans-serif;
    background-color: #f4f4f4;
    padding: 20px;
    margin: 0; /* ★bodyの余白をリセット */
}

/* 5分 (1コマ) の幅を定義します */
:root {
    --col-width-5min: 8px; 
    --col-width-10min: calc(var(--col-width-5min) * 2);
    --row-height: 24px; 
    --names-area-width: 100px;

    /* ▼▼▼ カテゴリごとの色を定義 ▼▼▼ */
    --color-care: #aee1e1;
    --color-work: #f6d186;
    --color-treatment: #ffb3b3;
    --color-other: #d9d9d9;
    --color-break: #c1e1c1;
    /* ▲▲▲ カテゴリごとの色を定義 ▲▲▲ */
}

/* ▼▼▼ 全体レイアウトを更新 ▼▼▼ */
.app-container {
    display: flex;
    gap: 20px;
}
.main-content {
    flex-grow: 1;
    display: flex; /* ★縦並びのレイアウトに変更 */
    flex-direction: column;
}
/* ▲▲▲ 全体レイアウトを更新 ▲▲▲ */

/* ★全体レイアウト (左:名前 / 右:タイムライン) */
.schedule-board-container {
    display: flex;
}
.names-area {
    width: var(--names-area-width);
    flex-shrink: 0; /* 縮まないように固定 */
    background-color: #f9f9f9;
}
.timeline-area {
    width: 100%;
    overflow-x: auto; /* ★横スクロールはこちらに移動 */
}

/* タイムライン全体 (★横スクロールをtimeline-areaに移管) */
.timeline-container {
    /* width: 100%; */ /* ★削除 */
    /* overflow-x: auto; */ /* ★削除 */
    border: 1px solid #ccc;
    background-color: #fff;
}

/* 時間ヘッダー (8時... と 0 10 20...) */
.timeline-header {
    border-bottom: 2px solid #aaa;
    background-color: #f9f9f9;
    
    /* ★左の名前エリア幅に合わせて左に余白を作る */
    /* padding-left: var(--names-area-width); */
    /* ↑この方法はスクロール時にずれるため、names-area側で調整 */
}

/* ★左側：名前エリアのヘッダー高さ合わせ用 */
.names-header-spacer {
    height: 48.5px;  /* ★削除 (JSで設定する) */
    border-bottom: 2px solid #aaa;
    background-color: #f9f9f9;
}

/* ★左側：看護師名 */
.nurse-name-block {
    /* 1人分(3行)の高さに */
    height: calc(var(--row-height) * 3);
    padding: 5px;
    font-weight: bold;
    border-bottom: 1px solid #ccc;
    border-right: 1px solid #ccc;
    box-sizing: border-box;
    display: flex;
    align-items: center;
}
/* ▼▼▼ ここから追加 ▼▼▼ */
/* ベッドボード用の名前ブロック（1行の高さ） */
.bed-name-block {
    height: var(--row-height);
    padding: 5px;
    font-weight: bold;
    border-bottom: 1px solid #ccc;
    border-right: 1px solid #ccc;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center; /* 中央揃え */
}
/* ▲▲▲ ここまで追加 ▲▲▲ */


.time-row {
    display: flex; 
}
.hour-row {
    border-bottom: 1px solid #ccc;
}
.hour-block {
    width: calc(var(--col-width-10min) * 6); 
    text-align: center;
    padding: 5px 0;
    font-weight: bold;
    font-size: 16px;
    border-right: 1px solid #ccc;
    box-sizing: border-box; 
}
.minute-row { } /* 警告対策（削除してもOK） */
.minute-block {
    width: var(--col-width-10min); 
    text-align: center; 
    font-size: 10px;
    color: #555;
    border-right: 1px dotted #ddd; 
    box-sizing: border-box;
}
.minute-block.half-hour {
    border-right: 1px solid #bbb;
}


/* ★★★ タイムライン本体 ★★★ */
.timeline-body {
    /* JSで中身が追加されます */
}

/* ★看護師1人分 (3行) のグループ */
.nurse-row-group {
    height: calc(var(--row-height) * 3); /* ★3行分の高さ */
    box-sizing: border-box; /* ★罫線によるズレを防止 */
    border-bottom: 1px solid #ccc;
}
/* ▼▼▼ ここから追加 ▼▼▼ */
/* ベッド1床分 (1行) のグループ */
.bed-row-group {
    height: var(--row-height);
    box-sizing: border-box;
    border-bottom: 1px solid #ccc;
}
/* ▲▲▲ ここまで追加 ▲▲▲ */

/* ★タイムラインの1行 (5分グリッドの親) */
.timeline-row {
    height: var(--row-height);
    display: flex;
    border-bottom: 1px solid #eee; /* 行間の薄い線 */
    box-sizing: border-box;
}
/* 3行のうち最後の行だけ線を太くする */
.timeline-row:last-child {
    border-bottom: 1px solid #ccc;
}

/* ★5分ごとのセル (JSで生成) */
.grid-cell {
    width: var(--col-width-5min); /* 5分幅 */
    height: 100%;
    border-right: 1px dotted #ddd; /* 5分ごとの点線 */
    box-sizing: border-box;
}

/* 10分ごとの線 (JSでクラス付与) */
.grid-cell.ten-min-line {
    border-right: 1px solid #ccc;
}
/* 30分ごとの線 (JSでクラス付与) */
.grid-cell.half-hour-line {
    border-right: 1px solid #aaa;
}
/* 1時間ごとの線 (JSでクラス付与) */
.grid-cell.hour-line {
    border-right: 1px solid #999;
}

/* ★タブ切り替えボタン */
.controls-container {
    display: flex;
    justify-content: space-between; /* ★左右に振り分け */
    align-items: center;
    gap: 20px;
    margin-bottom: 10px; /* ★schedule-boardとの間隔 */
}
.control-group {
    display: flex;
    align-items: center;
    gap: 20px;
}

.nurse-count-settings {
    display: flex;
    gap: 15px;
    font-size: 14px;
}
.nurse-count-settings input {
    width: 40px;
}
/* ▲▲▲ ここまで追加 ▲▲▲ */
.mode-tabs {
    margin-bottom: 0; /* ★controls-containerで制御するためリセット */
}
.tab-button {
    padding: 5px 15px;
    font-size: 16px;
    border: 1px solid #ccc;
    background-color: #f0f0f0;
    cursor: pointer;
}
/* アクティブな（選択中）タブのスタイル */
.tab-button.active {
    background-color: #e0e0ff;
    border-bottom: 1px solid #e0e0ff;
}

/* ▼▼▼ ここからケアリストのスタイルを追加 ▼▼▼ */
.care-list-container {
    width: 300px;
    flex-shrink: 0;
    background-color: #f9f9f9;
    border: 1px solid #ccc;
    padding: 10px;
    box-sizing: border-box;
}

.care-list-container h3 {
    margin-top: 0;
    text-align: center;
    font-size: 18px;
}

.care-list-tabs {
    display: flex;
    margin-bottom: 10px;
}

.care-tab {
    flex: 1;
    padding: 8px;
    text-align: center;
    border: 1px solid #ccc;
    background-color: #fff;
    cursor: pointer;
    font-size: 12px;
}

.care-tab.active {
    font-weight: bold;
    border-bottom: 1px solid transparent;
}

/* タブの色分け */
.care-tab[data-category="care"].active { border-color: var(--color-care); background-color: var(--color-care); }
.care-tab[data-category="work"].active { border-color: var(--color-work); background-color: var(--color-work); }
.care-tab[data-category="treatment"].active { border-color: var(--color-treatment); background-color: var(--color-treatment); }
.care-tab[data-category="other"].active { border-color: var(--color-other); background-color: var(--color-other); }
.care-tab[data-category="break"].active { border-color: var(--color-break); background-color: var(--color-break); }

.care-list-body {
    height: calc(100vh - 150px); /* 高さをビューポートに合わせる（調整可） */
    overflow-y: auto;
    border: 1px solid #eee;
}

.care-item {
    display: flex;
    align-items: center;
    padding: 8px;
    border-bottom: 1px solid #eee;
    font-size: 14px;
}

.care-item-name {
    flex-grow: 1;
}

.care-item-staff,
.care-item-time {
    width: 60px;
    text-align: center;
    flex-shrink: 0;
}

/* リスト項目の色分け */
.care-item[data-category="care"] { background-color: var(--color-care); }
.care-item[data-category="work"] { background-color: var(--color-work); }
.care-item[data-category="treatment"] { background-color: var(--color-treatment); }
.care-item[data-category="other"] { background-color: var(--color-other); }
.care-item[data-category="break"] { background-color: var(--color-break); }
/* ▲▲▲ ここまでケアリストのスタイルを追加 ▲▲▲ */

/* ▼▼▼ ここから病棟関連のスタイルを追加 ▼▼▼ */
.ward-display-area {
    margin-bottom: 15px;
}
.ward-row {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
    padding: 5px; /* ★内側に余白を追加 */
    border-radius: 5px; /* ★角を丸くする */
    transition: background-color 0.3s; /* ★背景色の変化を滑らかに */
}
/* ▼▼▼ ここから追加 ▼▼▼ */
.ward-row.active {
    background-color: #e0e0ff; /* 選択中の行の背景色 */
}
/* ▲▲▲ ここまで追加 ▲▲▲ */
.ward-tab {
    width: 100px; /* names-areaの幅と合わせる */
    flex-shrink: 0;
}
.bed-display-container {
    display: flex;
    gap: 4px;
    padding-left: 10px;
    flex-grow: 1; /* ★利用可能なスペースいっぱいに広がるように設定 */
    flex-wrap: nowrap; /* ★ベッドが折り返さないように設定 */
    overflow-x: auto; /* ★はみ出した場合はスクロールできるように設定 */
}
.bed-box {
    width: 30px;
    height: 30px; /* 高さを30pxに統一 */
    background-color: #e9ecef;
    border: 1px solid #ccc;
    border-radius: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    color: #333;
    position: relative; /* 子要素の絶対配置の基準に */
}
.bed-box.taken {
    background-color: #ffcccc;
    border-color: #ff0000;
}
.bed-box.reserved {
    background-color: #cce5ff;
    border-color: #004085;
}
.bed-box.available {
    background-color: #d4edda;
    border-color: #155724;
}

/* ▲▲▲ ここまで病棟関連のスタイルを追加 ▲▲▲ */